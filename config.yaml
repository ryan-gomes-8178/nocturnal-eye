stream:
  # URL to HLS stream from TerrariumPI via nocturnal-eye bypass endpoint
  # Note: Use localhost here - the API will automatically translate it to the correct hostname
  url: "http://localhost:8090/nocturnal-eye/stream.m3u8"
  
  # Public configuration for client access
  # These values are used when the configured URL is empty, a device path, or non-HTTP.
  public_port: 8090
  public_path: "/nocturnal-eye/stream.m3u8"
  
  # Fallback to test video file if stream unavailable
  fallback_enabled: false
  fallback_path: "tests/sample_video.mp4"
  
  # Frame processing rate (process every N frames)
  fps_target: 2
  
  # Connection timeout in seconds
  timeout: 30
  max_retries: 5
  retry_delay: 10
motion:
  # Sensitivity (lower = more sensitive, range: 1-100)
  # Reduced from 55 to 30 after lighting change for better gecko detection
  sensitivity: 30
  
  # Minimum area in pixels to consider as gecko
  # Reduced from 1200 to 800 to catch smaller movements
  min_area: 700
  
  # Maximum area in pixels to consider as gecko
  max_area: 9000
  
  # Number of frames to use for background history
  history_frames: 1200
  
  # Detect and remove shadows
  detect_shadows: true
  
  # Region of Interest (ROI)
  # Set enabled: false to analyze entire frame
  region_of_interest:
    enabled: false
    x: 0
    y: 0
    width: 0
    height: 0
tracking:
  stationary_threshold: 5
  
  # Maximum distance in pixels to link detections across frames
  max_tracking_distance: 220
  
  # Minimum consecutive detections to confirm object
  min_detections: 3

# Zones of Interest
# Define areas in your terrarium for behavioral analysis
zones:
  - name: "Feeding Station"
    x: 120
    y: 195
    radius: 50
    color: [0, 255, 0]  # Green
    
  - name: "Basking Spot"
    x: 500
    y: 100
    radius: 80
    color: [255, 165, 0]  # Orange
    
  - name: "Hide Box"
    x: 100
    y: 400
    radius: 70
    color: [0, 0, 255]  # Blue

# Schedule
schedule:
  # Only process during these hours (24-hour format)
  enabled: false
  start_time: "20:00"  # 8 PM
  end_time: "08:00"    # 8 AM
  
  # Time zone
  timezone: "America/New_York"

# Detection Publishing Windows
# Controls when detections are published to TerrariumPI monitoring
# Helps reduce false positives from daytime interference like shadows/reflections
detection_publishing:
  enabled: true
  # Only publish detections during these hours (24-hour format)
  active_hours:
    start: "22:00"  # 10 PM
    end: "06:00"    # 6 AM
  # Optional: Future improvement - sync with light controller schedules
  # sync_with_lights:
  #   - name: "jungle_dawn"
  #   - name: "uvb_light"

# Database
database:
  path: data/gecko_activity.db
  backup_enabled: true
  backup_interval: daily
  backup_retention_days: 30
api:
  enabled: true
  host: 0.0.0.0
  port: 5001
  cors_enabled: true
  
  # CORS allowed origins (list of URLs allowed to access the API)
  allowed_cors_origins:
    - "http://localhost:5001"
  
  debug: false

# Snapshot Capture
snapshots:
  # Save annotated snapshot every N seconds
  save_interval: 10
  
  # Maximum number of snapshots to keep
  max_snapshots: 200
  
  # JPEG quality (1-100)
  quality: 85

# Heatmap Generation
heatmap:
  # Resolution of heatmap grid
  grid_size: 50
  
  # Maximum number of snapshots to keep
  max_snapshots: 200
  
  # JPEG quality (1-100)
  quality: 85
heatmap:
  grid_size: 50
  colormap: COLORMAP_JET
  overlay_alpha: 0.6
logging:
  level: INFO
  file: logs/nocturnal_eye.log
  console: true
  max_bytes: 10485760
  backup_count: 5
performance:
  nice_value: 10
  use_gpu: false
  frame_buffer_size: 10
